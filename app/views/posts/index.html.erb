<%= content_for :head do %>
  <%= stylesheet_link_tag "posts_index.css", "data-turbo-track": "reload" %>
<% end %>
<div class="posts-container">
  <!-- Header Section -->
  <div class="posts-header">
    <h1>
      <i class="fas fa-newspaper me-2"></i> All Anime Posts
    </h1>
    <%= link_to "New Post", new_post_path, class: "btn-new-post" %>
  </div>
  <!-- Posts Grid -->
  <div class="posts-grid">
    <% if @posts.any? %>
      <% @posts.each do |post| %>
        <div class="post-card">
          <!-- Card Header -->
          <div class="post-card-header">
            <div class="post-title-wrapper">
              <h3><%= post.title %></h3>
              <% if post.published_date %>
                <span class="post-date-badge">
                  <i class="fas fa-calendar-day me-1"></i>
                  <%= post.published_date.strftime("%B %e, %Y") %>
                </span>
              <% end %>
            </div>
          </div>
          <!-- Card Body -->
          <div class="post-card-body">
            <p class="post-excerpt"><%= truncate(post.body, length: 250) %></p>
            <% if current_user == post.user %>
              <div class="post-actions">
                <%= link_to post, class: "btn-action btn-view" do %>
                  <i class="fas fa-eye me-1"></i> Show
                <% end %>
                <%= link_to edit_post_path(post), class: "btn-action btn-edit" do %>
                  <i class="fas fa-edit me-1"></i> Edit
                <% end %>
                <%= link_to post_path(post), 
                          data: { turbo_method: :delete, turbo_confirm: "Delete this post?" }, 
                          class: "btn-action btn-delete" do %>
                  <i class="fas fa-trash me-1"></i> Delete
                <% end %>
              </div>
            <% end %>
          </div>
          <!-- Card Footer -->
          <div class="post-card-footer">
            <small class="post-meta">
              <i class="fas fa-clock me-1"></i>
              Posted <%= time_ago_in_words(post.created_at) %> ago
            </small>
            <%= link_to "#", class: "btn-comment" do %>
              <i class="far fa-comment"></i> Comment
            <% end %>
          </div>
        </div>
      <% end %>
    <% else %>
      <!-- Empty State -->
      <div class="empty-state">
        <i class="fas fa-newspaper"></i>
        <h3>No Posts Yet</h3>
        <p>Be the first to share your anime thoughts!</p>
        <%= link_to "Create Your First Post", new_post_path, class: "btn-empty-state" %>
      </div>
    <% end %>
  </div>
</div>
