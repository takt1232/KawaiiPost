<div class="container py-5 animate__animated animate__fadeIn">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
          <h1 class="fw-bold brand-font text-primary mb-0">
            <i class="fas fa-newspaper me-2"></i>Post Details
          </h1>
          <nav aria-label="breadcrumb" class="mt-2">
            <ol class="breadcrumb">
              <li class="breadcrumb-item"><%= link_to "Home", root_path %></li>
              <li class="breadcrumb-item"><%= link_to "All Posts", posts_path %></li>
              <li class="breadcrumb-item active" aria-current="page"><%= truncate(@post.title, length: 20) %></li>
            </ol>
          </nav>
        </div>
        <div class="btn-group">
          <%= link_to "Back", posts_path, class: "btn btn-outline-secondary btn-hover-scale" %>
          <%= link_to "Edit", edit_post_path(@post), class: "btn btn-primary btn-hover-scale" %>
        </div>
      </div>
      <div class="card border-0 shadow-sm mb-4">
        <div class="card-body p-4 p-lg-5">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h2 class="card-title fw-bold mb-0"><%= @post.title %></h2>
            <% if @post.published_date %>
              <span class="badge bg-primary bg-opacity-10 text-primary rounded-pill px-3 py-2">
                <i class="fas fa-calendar-day me-1"></i>
                <%= @post.published_date.strftime("%b %d, %Y") %>
              </span>
            <% end %>
          </div>
          <div class="post-meta mb-4 d-flex align-items-center">
            <div class="avatar me-3">
              <i class="fas fa-user-circle fa-2x text-primary"></i>
            </div>
            <div>
              <p class="mb-0 fw-bold">Posted by <%= current_user.email%></p>
              <small class="text-muted">
                <i class="fas fa-clock me-1"></i>
                <%= time_ago_in_words(@post.created_at) %> ago
                <% if @post.updated_at > @post.created_at %>
                  <span class="ms-2">
                    <i class="fas fa-sync-alt me-1"></i>
                    Updated <%= time_ago_in_words(@post.updated_at) %> ago
                  </span>
                <% end %>
              </small>
            </div>
          </div>
          <div class="post-content mb-5">
            <%= simple_format(@post.body, {}, wrapper_tag: "div", class: "mb-0") %>
          </div>
          <div class="post-actions d-flex justify-content-between border-top border-bottom py-3 mb-4">
            <button class="btn btn-outline-primary rounded-pill">
              <i class="far fa-comment me-1"></i>
              <span class="comment-count">8</span> Comments
            </button>
          </div>
          <div class="d-flex justify-content-end gap-3">
            <%= link_to "Delete", @post, method: :delete, data: { confirm: "Are you sure you want to delete this post?" }, class: "btn btn-outline-danger btn-hover-scale" %>
            <%= link_to "Edit Post", edit_post_path(@post), class: "btn btn-kawaii btn-hover-scale" %>
          </div>
        </div>
      </div>
      <!-- Comments Section -->
      <div class="card border-0 shadow-sm mb-4 animate__animated animate__fadeInUp">
        <div class="card-header bg-light">
          <h3 class="h5 mb-0"><i class="fas fa-comments me-2"></i>Comments</h3>
        </div>
        <div class="card-body">
          <div class="comment-form mb-4">
            <form>
              <div class="mb-3">
                <textarea class="form-control" rows="3" placeholder="Add a comment..."></textarea>
              </div>
              <button type="submit" class="btn btn-primary">Post Comment</button>
            </form>
          </div>
          <div class="comment-list">
            <!-- Sample comment -->
            <div class="comment mb-4 pb-3 border-bottom">
              <div class="d-flex mb-2">
                <div class="avatar me-3">
                  <i class="fas fa-user-circle fa-lg text-primary"></i>
                </div>
                <div>
                  <p class="mb-0 fw-bold">AnimeFan123</p>
                  <small class="text-muted">2 days ago</small>
                </div>
              </div>
              <div class="comment-body">
                <p>This was such a great analysis! I completely agree with your points about character development.</p>
              </div>
              <div class="comment-actions">
                <button class="btn btn-sm btn-link text-primary ps-0">
                  <i class="far fa-thumbs-up me-1"></i> Like
                </button>
                <button class="btn btn-sm btn-link text-primary">
                  <i class="fas fa-reply me-1"></i> Reply
                </button>
              </div>
            </div>
            <!-- Another sample comment -->
            <div class="comment">
              <div class="d-flex mb-2">
                <div class="avatar me-3">
                  <i class="fas fa-user-circle fa-lg text-primary"></i>
                </div>
                <div>
                  <p class="mb-0 fw-bold">OtakuQueen</p>
                  <small class="text-muted">1 hour ago</small>
                </div>
              </div>
              <div class="comment-body">
                <p>Have you seen the latest episode? It changes everything about this theory!</p>
              </div>
              <div class="comment-actions">
                <button class="btn btn-sm btn-link text-primary ps-0">
                  <i class="far fa-thumbs-up me-1"></i> Like
                </button>
                <button class="btn btn-sm btn-link text-primary">
                  <i class="fas fa-reply me-1"></i> Reply
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Related Posts -->
      <div class="card border-0 shadow-sm animate__animated animate__fadeInUp">
        <div class="card-header bg-light">
          <h3 class="h5 mb-0"><i class="fas fa-layer-group me-2"></i>Related Posts</h3>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-6 mb-3">
              <div class="card h-100 border-0 shadow-sm-hover">
                <div class="card-body">
                  <h4 class="h6 fw-bold">The Evolution of Shonen Anime</h4>
                  <p class="small text-muted mb-2">Posted 3 days ago</p>
                  <p class="small">Exploring how shonen anime has changed over the decades...</p>
                  <%= link_to "Read More", "#", class: "btn btn-sm btn-outline-primary" %>
                </div>
              </div>
            </div>
            <div class="col-md-6 mb-3">
              <div class="card h-100 border-0 shadow-sm-hover">
                <div class="card-body">
                  <h4 class="h6 fw-bold">Top 10 Anime of 2023</h4>
                  <p class="small text-muted mb-2">Posted 1 week ago</p>
                  <p class="small">Our picks for the best anime releases this year...</p>
                  <%= link_to "Read More", "#", class: "btn btn-sm btn-outline-primary" %>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<style>
  /* Custom Styles */
  .brand-font {
    font-family: 'Comic Sans MS', cursive, sans-serif;
  }

  .btn-kawaii {
    background-color: #ff6b9d;
    color: white;
    border: none;
    border-radius: 50px;
    padding: 10px 20px;
    font-weight: bold;
    box-shadow: 0 4px 0 #d44d7d;
    transition: all 0.3s;
  }

  .btn-kawaii:hover {
    background-color: #ff5a8a;
    transform: translateY(-2px);
    box-shadow: 0 6px 0 #d44d7d;
    color: white;
  }

  .btn-hover-scale {
    transition: transform 0.2s;
  }

  .btn-hover-scale:hover {
    transform: scale(1.05);
  }

  .post-image-container {
    position: relative;
    overflow: hidden;
    max-height: 400px;
  }

  .post-header-image {
    width: 100%;
    object-fit: cover;
    transition: transform 0.5s;
  }

  .post-image-container:hover .post-header-image {
    transform: scale(1.02);
  }

  .image-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 100px;
    background: linear-gradient(to top, rgba(0,0,0,0.7), transparent);
  }

  .post-content {
    font-size: 1.1rem;
    line-height: 1.8;
    color: #333;
  }

  .post-content p {
    margin-bottom: 1.5rem;
  }

  .post-actions .btn {
    padding: 8px 20px;
    transition: all 0.3s;
  }

  .btn-like:hover, .btn-like.active {
    color: #dc3545 !important;
    border-color: #dc3545 !important;
  }

  .btn-like.active i {
    font-weight: 900;
  }

  .shadow-sm-hover {
    transition: box-shadow 0.3s;
  }

  .shadow-sm-hover:hover {
    box-shadow: 0 0.5rem 1rem rgba(0,0,0,0.1) !important;
  }

  .animate__animated {
    opacity: 0;
  }

  .animate__fadeIn {
    animation-name: fadeIn;
  }

  .animate__fadeInUp {
    animation-name: fadeInUp;
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Like button functionality
    document.querySelectorAll('.btn-like').forEach(btn => {
      btn.addEventListener('click', function() {
        const icon = this.querySelector('i');
        const count = this.querySelector('.like-count');

        if (this.classList.contains('active')) {
          // Unlike
          this.classList.remove('active');
          icon.classList.remove('fas');
          icon.classList.add('far');
          count.textContent = parseInt(count.textContent) - 1;
        } else {
          // Like
          this.classList.add('active');
          icon.classList.remove('far');
          icon.classList.add('fas');
          count.textContent = parseInt(count.textContent) + 1;
        }
      });
    });

    // Initialize animations when elements come into view
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.style.opacity = 1;
        }
      });
    }, { threshold: 0.1 });

    document.querySelectorAll('.animate__animated').forEach(el => {
      observer.observe(el);
    });
  });
</script>
